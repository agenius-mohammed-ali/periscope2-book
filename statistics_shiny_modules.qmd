# Feature Analyzer Module

## Objective

This module targets to identify data different features types, analyze their central tendency and dispersion, along with plotting feature distribution based on its type.

So, in this chapter we will know:

-   What is data?
-   What is data features? what are its types?
-   How to analyze data?
-   How to use R in analyzing data?
-   Building data measures shiny module

## Background

### Data

Data can be defined as a collection of observations or facts that describe an event or answer a question scientifically in order to make an informative decision later (ref:https://www.wordnik.com/words/data)

Examples for that can be:

-   Students grades in certain class/school
-   The trees growth rate for certain forest
-   Which goods attract customer more in certain market

Observations can be collected for a feature or more that describe that event such as:

-   Students name, gender, subject, grade, etc..
-   Trees type, name, tall, etc..
-   goods name, manufacture, expiration date, price, etc..

Each feature gives an insight or different look into the data in which leads to an informative decision or answer at the end

To extract feature insight we need to understand data features more:

-   its type
-   its characteristics
-   its distribution
-   and its relation with other features

In next section we will explore features data types as that is the key to understand everything after

### Features Data Types

To analyze data features and extract useful insights from it, we need to understand its nature and type to analyze it correctly and since features can be considered data descriptors, they can be anything and have any type. However, we can classify any feature type into two main groups:

-   Complex Feature
-   Simple Feature

Complex feature is any feature that cannot be straight forward measured or got analyzed statistically and would need more special *data processing* and most probably it will be converted to many sub features by its own to be analyzed statistically (i.e YouTube video, binary log files. book text, etc..). Each sub-type of these features would need a very specific and different type of processing (i.e video processing, audio processing, NLP, etc..) and that is beyond the scope of this book.

In contrast, Simple feature is any feature that can be directly classified, measured and got analyzed statistically (i.e height, width, age, class, etc..). This type can classified into three main sub-types:

-   Categorical
-   Discrete
-   Continuous Figure (2.1) summarizes these types (check snippet 2.1 for generating below tree)\
    ![Features Classifications](Images/2_1_Features_Classification.png)

In next sections, we will discuss these types in more detail and discuss how to analyze them using R

#### Categorical

Categorical feature is data that cannot be measured with numbers and have finite number of categories or distinct groups (i.e gender, race, language, etc..), However, it still can take numeric *form* (i.e age groups, weight groups, etc..).

Categorical data can be classified into two sub types:

-   **Nominal** in which categories order is not important and means nothing (i.e gender, nationality, eye color, etc..)
-   **Ordinal** in which categories order is important such as measurements in general (low, middle, high), grades (A, B, C, ..) Days of the week (Saturday, Sunday, ..)

#### Discrete

Discrete feature is a numeric feature with finite and countable number of values between any two values, such as:

-   Store customers count per week day
-   Employees age
-   Weather degrees for a month

#### Continues

Continues feature is a numeric feature with an infinite and uncountable number of values between any two variables, such as:

-   BMI of students in a school
-   Daily rain volume in a certain area during in predefined duration
-   Yearly volume of Nile flow

### Features Central Tendency Measures and Dispersion

Normally, data collections have hundreds to thousands of observations for its different features. Hence, to understand this amount of data and extract decision making supporting insights, we need to use different statistical methods to summarize data and know its dispersion. In next sections, the most famous features tendency measures and dispersion will be discussed in brief and how we can use them in `R`

#### Central Tendency Measures

A measure of central tendency is a feature data *average/center* value. The most common measures of central tendency methods are:

- The arithmetic mean
- The median
- Quantiles
- The mode

In next subsection, each method will be discussed briefly with an `R` example if applicable

##### Arithmetic Mean

**Arithmetic Mean** is simply the data average as follow:

$$
\bar{x}  = \frac{1}{n} \sum_{i = 1}^{n}{x_i}
$$

and it can be calculated using `mean` function in `R`: Ex1: Mean height of `R` embedded dataset `tree` is:

```{r}
mean(trees$Height)
```

##### Median

Median value is the value that divides feature data into two equal sets. The median calculated differently based on observations count as follow:

-   If count of observations is odd, the median will be the middle value
-   If count of observations is even, the median will be the mean of the middle two values

*Note: feature observations need to be ordered before calculating the mean. Lucky us, `R` is doing that for us*

$$
    median = \begin{cases}
              x_{\frac{n+1}{2}}  & \text{ if } n \text{ is odd} \\
              \frac{1}{2}(x_{\frac{n}{2}} + x_{\frac{n}{2} + 1}) & \text{ otherwise}
          \end{cases}
$$

and it can be calculated using `median` function in `R`: Ex1: Median of height of`R` embedded dataset `tree` is:

```{r}
median(trees$Height)
```

*Note: mean and median values happen to the same in the used dataset as it symmetrically distributed around its center, but that is not usually the case*

##### Quantiles
If we need to divide data into more partitions than just two then we use quantiles, for example: 

- a *15 %-quantile* divides the data into two parts such that at least **15%** of the values are less than or equal to the quantile and at least **85%** of the values are greater than or equal to the quantile.

Hence, quantiles can take any integer value from *0* to *100* (here it will called **percentiles**) or decimal value between *0* and *1* (here it will called **quintiles**)

Quantiles have special values as follow:

- *0 %-quantile*: the minimum data value
- *50 %-quantile*: the median value
- *100 %-quantile*: the maximum data value

```{r}
quantile(trees$Height)
```

##### Mode
The most frequent value in feature observations called feature *mode*. Hence, the value can be calculated for any feature type.

It cannot be directly calculate with `R`. Hence, a custom function to calculate mode value will be developed in the module later.

#### Feature Dispersion

Feature dispersion (or variability) is to know how feature data is spread out, to know if data is squeezed or scattered, to know if the data is homogenous or heterogeneous.

The most famous methods to calculate dispersion are:

- Range, 
- Interquartile Range, 
- Variance, 
- and Standard Deviation. 

In next subsection, each method will be discussed briefly with an `R` example if applicable

##### Range and Interquartile Range

- **Range** is the difference between maximum and minimum values in the dataset
- **Interquartile Range** is the difference between *75th* and *25th* quartiles values

To obtain needed values to calculate both **Range** and **Interquartile Range** using `R, use `summary` function as follow:

```{r}
summary(trees$Height)
```

##### Variance

Variance is the important and known dispersion value and symbolized as $\sigma^2$ and can be calculated as follow:
$$
 \sigma^2 = \sum{\frac{(x_i - \mu)^2}{N}}
$$
where μ is the population mean, $x_i$ is the *ith* element from the population, *N* is the population size, and Σ is just a fancy symbol that means “sum.”

To calculate **variance** in `R`, use `var` function as follow

```{r}
var(trees$Height)
```
##### Standard Deviation

Standard deviation is simply the square root of variance and to calculate it in `R`, use `sd` function as follow

```{r}
sd(trees$Height)
sd(trees$Height) == sqrt(var(trees$Height))
```

### Features Visualization
Numerical analysis is very important as discussed in previous section. However, a picture worthies more than a thousand word. Hence, presenting the feature visually in a chart helps to summarize the feature in a more easy-to-understand method to human brain. Moreover, using cavansXpress will allow us to show numerical analysis along with the visual analysis easily with the ability to switch between different charts without re-coding our chart, in addition to many other on-shelf features that were discussed in chapter 1.

In next sections, the most famous features graphical representations will be discussed in more details with examples on how to implement them using `R` and `canvasXpress` package.

#### Pie Chart

The simplest method to visualize categorical data. It is a circle divided into sectors. Each sector represent a feature relative frequency (upon hovering over plot, both frequency and relative frequency will be shown). Sum of the sectors equal 100%

![Frequency Barplot](Images/2_2_a_pie_chart.png)
![Frequency Barplot](Images/2_2_b_pie_chart.png)
(check Ch2_2.2.R for generating the above charts)

#### Bar Plot

Another method to visualize categorical data. Usually, each category is represented as a bar in the X-axis while bar height represents either category frequency (absolute or relative). The tallest bar is representing the *mode*.

![Frequency Barplot](Images/2_3_a_bar_plot.png)
    
However, bar plot can be customized to view data in different ways. For example, instead of displaying frequencies on the Y-axis, relative frequencies can be displayed instead
![Relative Frequency Barplot](Images/2_3_b_bar_plot.png)
Also, bars cab via stacked above each other to show cumulative distribution along with regular distribution
![Frequency Stacked Barplot](Images/2_3_c_bar_plot.png)

![RelativeFrequency Stacked Barplot](Images/2_3_d_bar_plot.png)

*Note: if categories count is large, bar plot became so dense and might be hard to digest*

(check Ch2_2.3.R for generating the above charts)

#### Histogram
Histogram idea is very similar to **Bar Plot** but for numerical data (continues and discrete). Mainly the data is divided into multiple intervals (bins). Each bin is represented by its own bar. Bar height represents the frequency for the data within that interval

Using `canvasXpress`, analyzer can control number of bins and/or bin width. Also analyzer can change the bars into dotplot to display *Relative Frequency* and many other options that can be explored bt visiting https://canvasxpress.org/examples/histogram.html

The following are histogram examples (check Ch2_2.4.R for generating the below charts)
![Histogram](Images/2_4_a_hist_plot.png)
![Histogram Dot plot](Images/2_4_b_hist_plot.png)

#### Density Plot
Another representation for numerical data but with smother look and feel as there is no need to partition data artificially into bins. `canvasXpress` has many features to control density plot. Also analyzer can show both histogram and density plot in the same plot.

The following are density plot examples (check Ch2_2.5.R for generating the below charts)
![Histogram](Images/2_5_a_densityt_plot.png)
![Histogram](Images/2_5_b_densityt_plot.png)

#### Boxplot
One of the best methods to describe numerical feature measure tendency and dispersion is **Boxplot**.
It shows median, quartiles, minimum, maximum, and outlier values in the same plot easily, these info can be displayed via plot tooltop upon hovering on the box.

The following are histogram examples (check Ch2_2.6.R for generating the below charts)
![Boxplot](Images/2_6_a_box_plot.png)
![Boxplot tooltip](Images/2_6_b_box_plot.png)

## Module Design

-   Data have to be wrangled
-   This is a descriptive and analytically guide

### Univariate Descriptor Module

#### Categorical

##### ID

-   Distinct values for each observation
-   No plot and no statistical description

##### Factor

Unique values less that configurable number (default = 5) and unique values does not equal number of observations

##### Character

-   Anything that is neither ID nor factor
-   No plot and no statistical description (?)

#### Numerical

-   Date
-   Integer
-   Double

#### Requirements

-   Define variable type
-   Define variable measures
-   Define variable plot

### Dataset Descriptor Module

## Excerises
